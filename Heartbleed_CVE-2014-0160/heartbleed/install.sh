#!/bin/bash
apt-get update

cp -rf ./bin/* /var/www/html/
cp -rf ./bin/index.html /tmp/
apt-get purge -y openssl

apt-get purge -y apache*

apt-get install -y make

mv /var/www/html/openssl-1.0.1e.tar.gz /tmp

cd /tmp

tar -zxvf openssl-1.0.1e.tar.gz

cd openssl-1.0.1e/

rm -rf /usr/bin/pod2man

./config  --prefix=/usr/local --openssldir=/usr/local/ssl

make

make install
./config shared --prefix=/usr/local --openssldir=/usr/local/ssl

make clean
make
make install


apt-get -y upgrade
apt-get purge -y apache*

apt-get install -y apache2

mv /tmp/index.html /var/www/html/index.html

mv /var/www/html/apache2.conf /etc/apache2/apache2.conf

service apache2 restart

a2enmod ssl

service apache2 restart

mkdir /etc/apache2/ssl


mv /var/www/html/apache.key /etc/apache2/ssl/apache.key

mv /var/www/html/apache.crt /etc/apache2/ssl/apache.crt

mv /var/www/html/default-ssl.conf /etc/apache2/sites-available/default-ssl.conf

a2ensite default-ssl.conf

service apache2 reload

service apache2 restart







